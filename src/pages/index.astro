---
import BaseLayout from '../layouts/BaseLayout.astro';
import NavBar from '../components/NavBar.astro';
---

<BaseLayout title="Echoes of Indiana â€” The Oracle Entity Project">
  <NavBar />
  
  <section class="relative h-screen flex items-center justify-center overflow-hidden">
    <!-- Video Background -->
    <iframe 
      id="heroVideo"
      src="https://www.youtube.com/embed/VXCqxZ8AXwU?autoplay=1&mute=1&loop=1&playlist=VXCqxZ8AXwU&controls=0&showinfo=0&rel=0&iv_load_policy=3&modestbranding=1&playsinline=1&enablejsapi=1"
      class="absolute inset-0 w-full h-full object-cover z-0"
      style="border: none;"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>
    
    <!-- Sound Toggle Button -->
    <button 
      id="soundToggle"
      class="absolute top-4 right-4 z-50 bg-brand-teal hover:bg-brand-teal/80 text-white p-4 rounded-full transition-all duration-300 shadow-lg border-2 border-white/30"
      title="Toggle Sound"
    >
      <svg id="soundIcon" class="w-7 h-7" fill="white" stroke="none" viewBox="0 0 24 24">
        <path id="soundPath" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
        <path id="mutePath" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" class="opacity-0"/>
      </svg>
    </button>
    
    <!-- Overlay -->
    <div class="absolute inset-0 bg-brand-navy/50 z-10"></div>
    
    <!-- Desktop: Right Side Vertical Content -->
    <div class="hidden md:block absolute right-8 top-1/2 transform -translate-y-1/2 z-20 w-96">
      <div class="bg-black/30 backdrop-blur-sm rounded-2xl p-8 border border-brand-teal/20">
        <h1 class="text-4xl font-bold mb-4 bg-gradient-to-r from-brand-teal to-brand-magenta bg-clip-text text-transparent text-center">
          Echoes of Indiana
        </h1>
        <h2 class="text-xl text-white mb-6 font-light text-center">
          The Oracle Entity Project
        </h2>
        <blockquote class="text-base text-brand-amber italic mb-8 leading-relaxed text-center">
          "Hold a conversation with Indiana's past, present, and possible futures."
        </blockquote>
        
        <div class="flex flex-col gap-4 mb-8">
          <a 
            href="/experience" 
            class="bg-brand-teal hover:bg-brand-magenta text-brand-navy font-bold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 text-center"
          >
            Deep Dive
          </a>
          <a 
            href="/budget" 
            class="border-2 border-brand-amber text-brand-amber hover:bg-brand-amber hover:text-brand-navy font-bold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 text-center"
          >
            Budget
          </a>
        </div>
        
        <div class="text-center pt-6 border-t border-brand-teal/20">
          <p class="text-white/70 text-sm mb-2">Contact</p>
          <p class="text-brand-teal text-lg font-medium">Caleb Weintraub</p>
          <p class="text-brand-amber text-sm">calebweintraubstudios@gmail.com</p>
        </div>
      </div>
    </div>

    <!-- Mobile: Bottom Content -->
    <div class="md:hidden absolute bottom-8 left-4 right-4 z-20">
      <div class="bg-black/40 backdrop-blur-sm rounded-2xl p-6 border border-brand-teal/20 text-center">
        <h1 class="text-3xl font-bold mb-2 bg-gradient-to-r from-brand-teal to-brand-magenta bg-clip-text text-transparent">
          Echoes of Indiana
        </h1>
        <h2 class="text-sm text-white mb-4 font-light">
          The Oracle Entity Project
        </h2>
        <blockquote class="text-sm text-brand-amber italic mb-6 leading-relaxed">
          "Hold a conversation with Indiana's past, present, and possible futures."
        </blockquote>
        
        <div class="flex gap-3">
          <a 
            href="/experience" 
            class="flex-1 bg-brand-teal hover:bg-brand-magenta text-brand-navy font-bold py-3 px-4 rounded-lg transition-all duration-300 text-center text-sm"
          >
            Deep Dive
          </a>
          <a 
            href="/budget" 
            class="flex-1 border-2 border-brand-amber text-brand-amber hover:bg-brand-amber hover:text-brand-navy font-bold py-3 px-4 rounded-lg transition-all duration-300 text-center text-sm"
          >
            Budget
          </a>
        </div>
      </div>
    </div>

  </section>

  <script>
    let isMuted = true;
    let player;

    // Load YouTube IFrame API
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Called when YouTube API is ready
    window.onYouTubeIframeAPIReady = function() {
      player = new YT.Player('heroVideo', {
        events: {
          'onReady': onPlayerReady
        }
      });
    }

    function onPlayerReady(event) {
      const soundToggle = document.getElementById('soundToggle');
      const soundPath = document.getElementById('soundPath');
      const mutePath = document.getElementById('mutePath');

      soundToggle.addEventListener('click', function() {
        if (isMuted) {
          player.unMute();
          player.setVolume(30); // Set to 30% volume
          soundPath.classList.remove('opacity-0');
          mutePath.classList.add('opacity-0');
          isMuted = false;
        } else {
          player.mute();
          soundPath.classList.add('opacity-0');
          mutePath.classList.remove('opacity-0');
          isMuted = true;
        }
      });

      // Initial state - muted with mute icon visible
      soundPath.classList.add('opacity-0');
      mutePath.classList.remove('opacity-0');
    }
  </script>
</BaseLayout>